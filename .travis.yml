language: node_js
node_js:
- "8"
os:
- linux
- osx
cache:
  pip: true
  directories:
  - node_modules # NPM packages
dist: xenial
sudo: required
services:
- docker
before_install:
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then brew update; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then brew upgrade python; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then brew install curl unzip bats; fi  # python3
install:
- sudo `which npm` install -g serverless depcheck
- sudo `which python` -m pip install pipenv
before_script:
- npm install
script:
- depcheck .
- npm run lint
- npm run test
addons:
  apt:
    packages:
    - python2.7
    - python3.6
    - python-pip
    - curl
    - unzip
    - bats
